<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
   "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<constant name="struts.devMode" value="true" />

   <package name="default" namespace="/" extends="struts-default">
       
      <result-types>
		<result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
	  </result-types>

   	  <interceptors>
   	      <interceptor class = "com.upou.teapop.interceptor.LoginInterceptor" name="loginInterceptor"> 
   	      </interceptor>
   	      <interceptor-stack name="loginStack">
   	          <interceptor-ref name="loginInterceptor" />
   	          <interceptor-ref name="defaultStack" />
   	      </interceptor-stack>
   	  </interceptors>
   	  
   	  <default-action-ref name="index" />
   	  
   	  <global-results>
   	      <result name="login" type="redirectAction">admin</result>
   	  </global-results>

      <action name="index">
      	<result>index.jsp</result>
      </action>
      
      <action name="admin">
      	<result>/jsp/admin/login.jsp</result>
      </action>

   	  <action name="loginUser" class="com.upou.teapop.action.LoginAction" method="login"> 
   	    <result name="success" type="redirectAction">dashboard</result>
      	<result name="login" type="redirectAction">admin</result>
      </action>
      
   	  <action name="dashboard" class="com.upou.teapop.action.LoginAction" method="dashboard"> 
   	    <interceptor-ref name="loginInterceptor"/>
      	<result name="success" type="tiles">dashboard</result>
      </action>
      
      <action name="logoutUser" class="com.upou.teapop.action.LoginAction" method="logout"> 
      	<result name="success">/jsp/admin/login.jsp</result>
      </action>

   </package>
   
   <package name="admin" namespace="admin" extends="struts-default">
   	  
      
   </package>
   
</struts>
